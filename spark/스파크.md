# 스파크

인메모리 기반의 대용량 데이터 고속 처리 엔진으로 범용 분산 클러스터 컴퓨팅 프레임워크

### 스파크?

- 아파치 스파크(Apache spark)는 2011년 버클리 대학의 AMPLab에서 개발되었다.
- 현재는 아파치 재단의 오픈소스로 관리되고 있는 인메모리 기반의 대용량 데이터 고속 처리 엔진으로 범용 분산 클러스터 컴퓨팅 프레임워크이다.

### 특징

- Speed
    - 인메모리(In-Memory) 기반의 빠른 처리
- Ease of Use
    - 다양한 언어 지원(Java, Scala, R, SQL)을 통한 사용자 편의성
- Generality
    - SQL, Streaming, 머신러닝, 그래프 연산 등 다양한 컴포넌트 제공
- Run Everywhere
    - YARN, Mesos, Kubernetes 등 다양한 클러스터에서 동작 가능
    - HDFS, Casandra, HBase 등 다양한 파일 모맷 지원
    

### 인메모리 기반의 빠른 처리

- 스파크는 인메모리 기반의 처리로 맵리듀스 작업처리에 비해 디스크는 10배, 메모리 작업은 100배 빠른 속도를 가지고 있다.
- 맵리듀스는 작업의 중간 결과를 디스크에 쓰기 때문에 IO로 인하여 작업 속도에 제약이 생긴다.
- 스파크는 메모리에 중간 결과를 저장하여 반복 작업의 처리 효율이 높다.

<p align="center">
  <img src = "https://user-images.githubusercontent.com/33833780/138125930-c36b7f17-6234-4fcb-842b-95111c925718.png" width="600px">
</p>
<br><br>

### 다양한 컴포넌트 제공

- 스파크는 단일 시스템 내에서 스파크 스트리밍을 이용한 스트림 처리, 스파크 SQL을 이용한 SQL 처리, MLib를 이용한 머신러닝 처리, GraphX를 이용한 그래프 프로세싱을 지원한다.
- 추가적인 소프트웨어의 설치 없이도 다양한 애플리케이션을 구현할 수 있다.
- 각 컴포넌트간의 연계를 이용한 애플리케이션의 생성도 쉽게 구현할 수 있다.

### 다양한 언어 지원

- 스파크는 자바, 스칼라, 파이썬, R 인터페이스등 다양한 언어를 지원하여 개발자에게 작업의 편의성을 제공한다.
- 하지만 언어마다 처리하는 속도가 다르기 때문에 성능을 위해서 Scala로 개발을 진행하는 것이 좋다.

### 다양한 클러스터 매니저 지원

- 클러스터 매니저로 YARN, Mesos, Kubernetes, standalone 등 다양한 포맷을 지원하여 운영 시스템 선택에 다양성을 제공한다.
- 또한, HDFS, 카산드라, HBase, S3 등의 다양한 데이터 포맷을 지원하여 여러 시스템에 적용이 가능하다.

### 다양한 파일 포맷 지원 및 Hbase, Hive 등과 연동 가능

- 스파크는 기본적으로 TXT, Json, ORC, Parquet 등의 파일 포맷을 지원한다.
- S3, HDFS 등의 파일 시스템과 연동도 가능하고, HBase, Hive 와도 간단하게 연동할 수 있다.

### 컴포넌트 구성

- 스파크 컴포넌트 구성은 스파크 라이브러리, 스파크 코어, 클러스터 매니저로 구분되어 있다.

### 스파크 코어

- Spark Core는 메인 컴포넌트로 작업 스케쥴링, 메모리 관리, 장애 복구와 같은 기본적인 기능을 제공하고, RDD, Dateset, DataFrame을 이용한 스파크 연산을 처리한다.

### 스파크 라이브러리

- 스파크 라이브러리는 빅데이터 처리를 위한 작업용 라이브러리이다.
- 스파크 공식 지원 라이브러리는 다음과 같다.
    - Spark SQL
        - SQL을 이용하여 RDD, Dataset, DataFrame 작업을 생성하고 처리한다.
        - 하이브 메타스토어와 연결하여 하이브의 메타 정보를 이용하여 SQL 작업을 처리할 수 있다.
        - 샤크(Shark) 는 하이브에서 스파크 작업을 처리할 수 있도록 개발하는 외부 프로젝트 였는데 현재는 스파크 SQL로 통합되었다.
    - Spark Streaming
        - 스파크 스트리밍은 실시간 데이터 스트림을 처리하는 컴포넌트이다.
        - 스트림 데이터를 작은 사이즈로 쪼개어 RDD처럼 처리한다.
    - MLib
        - MLib는 스파크 기반의 머신러닝 기능을 제공하는 컴포넌트이다.
        - 분류, 회귀, 클러스터링, 협업 필터링 등의 머신러닝 알고리즘과 모델 평가 및 외부 데이터 불러오기 같은 기능도 지원한다.
    - GraphX
        - GraphX는 분산형 그래프 프로세싱이 가능하게 해주는 컴포넌트이다.
        - 각 간선이나 점에 임의의 속성을 추가한 지향성 그래프를 만들 수 있다.

### 클러스터 매니저

- 스파크 작업을 운영하는 클러스터 관리자이다.
- 스파크는 다양한 클러스터 매니저를 지원한다.
- 스파크에서 제공하는 스탠드얼론(Standalone)관리자를 이용할 수 있고, 메조스(Mesos), 얀(YARN), 쿠버네티스(Kubernetes) 등의 관리자를 지원한다.