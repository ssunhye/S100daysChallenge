# 스파크 모니터링

스파크 작업을 모니터링 하는 방법은 웹UI를 이용하는 방법과 Rest API를 이용하는 방법이 있다.

- 스파크 컨텍스트 웹UI
    - 스파크 컨텍스트가 실행되면 4040포트로 웹UI를 실행
    - 하나의 노드에 여러개의 컨텍스트가 실행되면 포트번호가 1씩 증가하면서 생성(4041, 4042, ...)
    - 스파크 컨텍스트가 실행되고 있는 동안에만 사용 가능
- 스파크 히스토리 서버
    - 실행중인 작업과 실행이 끝난 작업의 히스토리를 확인하기 위한 서버
    - `[start-history-server.sh](http://start-history-server.sh)` 로 실행하고 기본 접속 포트는 `18080`
    - 영구적인 저장소에 스파크 작업 내역을 저장하고 사용자의 요청에 정보를 반환
    

### 확인 가능 정보

- 스테이지와 태스크 목록
- RDD크기와 메모리 사용량
- 환경변수 정보
- 익스큐터의 정보

### REST API

스파크 히스토리 서버는 작업 애플리케이션에 대해 REST API를 이용해 json 형태의 정보를 제공

```bash
curl -s http://$(hostname -f):18080/api/v1/applications
curl -s http://$(hostname -f):18080/api/v1/[app-id]/jobs
```